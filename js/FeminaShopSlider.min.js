window.FEMINA=window.FEMINA||{},function(t){FEMINA.article=FEMINA.article||{};var e=function(e,i){t(i).length&&(FEMINA.ResponsiveBehaviour.call(this,e),this.props={containerSelector:i},this.initElements(),this.recalculateWidths(),this.equalizeItems(),this.centerClosestItems(),this.initEvents(),this.checkResolution())};e.prototype=Object.create(FEMINA.ResponsiveBehaviour.prototype),e.prototype.parent=FEMINA.ResponsiveBehaviour.prototype,e.prototype.constructor=e,FEMINA.article.FeminaShopSlider=e,e.prototype.initElements=function(){this.elements={$container:t(this.props.containerSelector),$window:t(".window",this.props.containerSelector),$content:t(".content",this.props.containerSelector),$items:t(".item",this.props.containerSelector),$back:t(".back",this.props.containerSelector),$forward:t(".forward",this.props.containerSelector),$currNum:t(".currentNumber",this.props.containerSelector),$itemsCountBox:t(".itemsCount",this.props.containerSelector)},t(".item>div",this.props.containerSelector).css("height","auto"),maxheight=0,t(".item",this.props.containerSelector).each(function(e,i){t(this).data("itemid",e+1),t(this).height()>maxheight&&(maxheight=t(this).height())}),t(".item>div",this.props.containerSelector).height(maxheight),this.props.itemsCount=this.elements.$items.length,this.props.autoscroll=!0,t(this.elements.$itemsCountBox).html(this.props.itemsCount)},e.prototype.initEvents=function(){var e=this;t(window).off("resize."+this.id).on("resize."+this.id,function(){e.recalculateWidths(),e.equalizeItems(),e.centerClosestItems()}),this.elements.$back.off("click."+this.id).on("click."+this.id,function(){e.props.isScrolling||(e.props.isScrolling=!0,e.scrollTo(-e.props.itemWidth*e.props.realVisibleItemsCount,function(){e.props.isScrolling=!1,e.equalizeItems()}),t(e.elements.$currNum).html(+t(e.elements.$currNum).html()-e.props.realVisibleItemsCount),parseInt(t(e.elements.$currNum).html())<1&&t(e.elements.$currNum).html(+t(e.elements.$currNum).html()+e.props.itemsCount))}),this.elements.$forward.off("click."+this.id).on("click."+this.id,function(){e.handleForward()}),this.elements.$container.off("mouseenter."+this.id).on("mouseenter."+this.id,function(){e.props.autoscroll=!1}),this.elements.$container.off("mouseleave."+this.id).on("mouseleave."+this.id,function(){e.props.autoscroll=!0}),this.props.autoscrollint&&clearInterval(this.props.autoscrollint),this.props.autoscrollint=setInterval(function(){e.autoscroll()},5e3)},e.prototype.handleForward=function(){var e=this;e.props.isScrolling||(e.props.isScrolling=!0,e.scrollTo(e.props.itemWidth*e.props.realVisibleItemsCount,function(){e.props.isScrolling=!1,e.equalizeItems()}),t(e.elements.$currNum).html(+t(e.elements.$currNum).html()+e.props.realVisibleItemsCount),parseInt(t(e.elements.$currNum).html())>e.props.itemsCount&&t(e.elements.$currNum).html(+t(e.elements.$currNum).html()-e.props.itemsCount))},e.prototype.startMobileBehaviour=function(){},e.prototype.stopMobileBehaviour=function(){this.elements.$window.off("scroll."+this.id)},e.prototype.equalizeItems=function(){this.findClosestVisibleItems();var t=Math.ceil((this.elements.$items.length-this.props.realVisibleItemsCount)/2),e=this.props.itemsCount-(this.props.lastVisibleIndex+1);this.moveItems(e-t)},e.prototype.moveItems=function(e){for(var i=t([]),s=0,o=Math.abs(e);s<o;s++)i=e>0?i.add(this.elements.$items.get(this.elements.$items.length-1-s)):i.add(this.elements.$items.get(s));e>0?this.elements.$content.prepend(i):this.elements.$content.append(i),this.elements.$window.scrollLeft(this.elements.$window.scrollLeft()+e*this.props.itemWidth)},e.prototype.centerClosestItems=function(){this.findClosestVisibleItems();var e=t(this.elements.$items[this.props.firstVisibleIndex]).position().left,i=e-this.elements.$window.scrollLeft(),s=i-this.props.windowMiddle;this.scrollTo(s)},e.prototype.scrollTo=function(t,e){if(Math.floor(t)){e=e||function(){};var i=this.elements.$window.scrollLeft();this.elements.$window.animate({scrollLeft:i+t},300,e)}},e.prototype.autoscroll=function(){this.props.autoscroll&&this.handleForward()},e.prototype.findClosestVisibleItems=function(){var e=this.elements.$window.scrollLeft()+this.props.windowMiddle;this.elements.$items=t(".item",this.elements.$container),this.props.firstVisibleIndex=Math.round(e/this.props.itemWidth-this.props.realVisibleItemsCount/2),this.props.lastVisibleIndex=this.props.firstVisibleIndex+this.props.realVisibleItemsCount-1},e.prototype.recalculateWidths=function(){this.props.scrollVisibleWidth=t(".window",this.elements.$container).width(),this.props.itemWidth=t(".item",this.elements.$container).outerWidth(!0),this.props.itemPadding=parseInt(t(".item-content",this.elements.$items[0]).css("padding-left").replace(/[^-\d\.]/g,"")),this.props.windowMiddle=this.elements.$window.width()/2-this.props.itemWidth/2,this.props.visibleItemsCount=Math.floor(this.props.scrollVisibleWidth/this.props.itemWidth),this.props.realVisibleItemsCount=Math.round(this.props.scrollVisibleWidth/this.props.itemWidth/2)}}(jQuery);